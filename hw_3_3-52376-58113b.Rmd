---
title: "hw_3_3"
author: "Бикмаев Руслан"
date: "10 10 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
if(!require('pacman')) install.packages('pacman')
pacman::p_load(data.table, microbenchmark)
```
## ДЗ 3.3

Для упражнения используются  данные so.csv, прекрепленные к материалам урока

1. Загрузите данные.
2. Выберете столбцы с никнеймами  и с цитируемым (V1, V5).
3. Присвойте колонкам понятные заголовки.
4. В случае лимита мощности домашнего компа, ДЗ можно сделать на выборке из таблицы, скажем 2000 строк.
5. Сделайте преобразование в широкий формат, в качестве заголовков колонок должны стоять никнеймы из V5 пользователей, каждая колонка содержать никнеймы, кем он процитирован.
6*. Для измерения влияния ключей и индексов создайте  глубокие копии таблицы, в одной из копий присвойте ключи, у второй индекс 1-му столбцу. Количество строк, на ваш взгляд необходимое для замеров и примерно соответствующее мощности компа. Измерьте влияние индексов и ключей на перевод таблицы в широкий формат.

```{r}

so <- fread('so.csv', encoding = 'UTF-8')
so_long <- so[, .(from = V1, quote_from = V5)]
so_long
# all.equal(so_long$quote_from, so$V5)
so[, lapply(.SD, uniqueN)] # 6234 уникальных процитированных пользователей???

so_wide <- dcast(
  so_long,
  from ~ quote_from,
  value.var = 'from',
  fun.aggregate = function(x) max(x)
)
```



Желательно сдать домашнее задание до 23:59 13.10.2019 г.

**Задание считается выполненным, когда:**
 * Домашняя работа сдана (1 балл)
 * Измерения проведены корректно, описание подробное (1 балл)
 * Код оформлен согласно рекомендациям tidyverse (1 балл)
 * Произведено преобразование в широкий формат (1 балла)
 

**Дополнительные баллы:**
* Произведено измерение влияния ключей и индексов (1 балл)
 
**Минимальное количество баллов для зачета - 4**

